div(ng-include='\'partials/navbar.html\'')
alert(ng-repeat="alert in alerts" type="alert.type" close="closeAlert($index)") {{alert.msg}}
.idea(ng-repeat="idea in ideas")
  h1 {{idea.title}}
    span.mergeStatus(ng-show='idea.root' ng-class='{merged: idea.branch_status.isMerged}') 
      | {{idea.branch_status.isMerged? "Merged" : "Unmerged"}}
  .idea-summary {{idea.summary}}
    div(ng-show='(idea.root)&&(!idea.branch_status.isMerged)' ng-animate=" 'animate' ")
      progressbar(max="100" value="idea.votePercent")
      button.btn.btn-primary(ng-click='vote(idea)' btn-checkbox ng-model='idea.novote') Vote
  .root(ng-show='idea.root') 
    h2 Root
    a(href='/idea/{{idea.root._id}}') {{idea.root.title}}
  .branches(ng-show='idea.mergedBranches.length + idea.unmergedBranches.length > 0')
    h2 Branches
    h3(ng-show='idea.mergedBranches.length > 0') Merged
    accordion.mergedBranches(close-others="true")
      accordion-group.branch(ng-repeat='branch in idea.mergedBranches' heading='{{branch.title}}')
        p {{branch.summary}}
        a(href='/idea/{{branch._id}}') Link
    h3(ng-show='idea.unmergedBranches.length > 0') Unmerged
    accordion.unmergedBranches(close-others="true")
      accordion-group.branch(ng-repeat='branch in idea.unmergedBranches' heading='{{branch.title}}')
        p {{branch.summary}}
        a(href='/idea/{{branch._id}}') Link
        progressbar.small(max="100" value="branch.votePercent")
pagination(ng-if="numPages > 1" total-items="totalIdeas" page="page" max-size="5" class="pagination-sm" boundary-links="true" rotate="true" items-per-page="ideasPer" on-select-page = "switchPage(page)")